# Kubernetes Secrets Configuration
# Note: This file contains templates. Actual secrets should be managed via:
# 1. External Secrets Operator (recommended)
# 2. Sealed Secrets
# 3. HashiCorp Vault integration
# 4. Cloud provider secret managers (AWS Secrets Manager, Azure Key Vault, GCP Secret Manager)

apiVersion: v1
kind: Secret
metadata:
  name: infra-mind-secrets
  namespace: infra-mind
type: Opaque
stringData:
  # Database credentials
  MONGO_ROOT_USERNAME: "admin"
  MONGO_ROOT_PASSWORD: "REPLACE_WITH_SECURE_PASSWORD"
  REDIS_PASSWORD: "REPLACE_WITH_SECURE_REDIS_PASSWORD"
  
  # Application secrets
  SECRET_KEY: "REPLACE_WITH_SECURE_SECRET_KEY_AT_LEAST_32_CHARS"
  
  # LLM API keys
  OPENAI_API_KEY: "REPLACE_WITH_OPENAI_API_KEY"
  
  # Cloud provider credentials
  AWS_ACCESS_KEY_ID: "REPLACE_WITH_AWS_ACCESS_KEY"
  AWS_SECRET_ACCESS_KEY: "REPLACE_WITH_AWS_SECRET_KEY"
  AZURE_CLIENT_ID: "REPLACE_WITH_AZURE_CLIENT_ID"
  AZURE_CLIENT_SECRET: "REPLACE_WITH_AZURE_CLIENT_SECRET"
  AZURE_TENANT_ID: "REPLACE_WITH_AZURE_TENANT_ID"
  GCP_PROJECT_ID: "REPLACE_WITH_GCP_PROJECT_ID"

---
# External Secrets Operator configuration (recommended for production)
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: vault-backend
  namespace: infra-mind
spec:
  provider:
    vault:
      server: "https://vault.example.com"
      path: "secret"
      version: "v2"
      auth:
        kubernetes:
          mountPath: "kubernetes"
          role: "infra-mind"

---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: infra-mind-external-secrets
  namespace: infra-mind
spec:
  refreshInterval: 15s
  secretStoreRef:
    name: vault-backend
    kind: SecretStore
  target:
    name: infra-mind-secrets
    creationPolicy: Owner
  data:
  - secretKey: MONGO_ROOT_PASSWORD
    remoteRef:
      key: infra-mind/database
      property: mongo_password
  - secretKey: REDIS_PASSWORD
    remoteRef:
      key: infra-mind/database
      property: redis_password
  - secretKey: SECRET_KEY
    remoteRef:
      key: infra-mind/app
      property: secret_key
  - secretKey: OPENAI_API_KEY
    remoteRef:
      key: infra-mind/llm
      property: openai_key
  - secretKey: AWS_ACCESS_KEY_ID
    remoteRef:
      key: infra-mind/aws
      property: access_key_id
  - secretKey: AWS_SECRET_ACCESS_KEY
    remoteRef:
      key: infra-mind/aws
      property: secret_access_key