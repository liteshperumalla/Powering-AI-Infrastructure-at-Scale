# Redis Sentinel Configuration for High Availability
# Monitors Redis master and handles automatic failover

# Sentinel Configuration
port 26379
sentinel announce-ip 127.0.0.1
sentinel announce-port 26379

# Monitor the master Redis instance
# sentinel monitor <master-name> <ip> <port> <quorum>
sentinel monitor infra-mind-master redis 6379 1

# Authentication
# sentinel auth-pass infra-mind-master ${REDIS_PASSWORD}

# Timeouts and thresholds
sentinel down-after-milliseconds infra-mind-master 5000
sentinel parallel-syncs infra-mind-master 1
sentinel failover-timeout infra-mind-master 10000

# Notification scripts (optional)
# sentinel notification-script infra-mind-master /var/redis/notify.sh
# sentinel client-reconfig-script infra-mind-master /var/redis/reconfig.sh

# Logging
logfile /var/log/redis/sentinel.log
loglevel notice

# Security
protected-mode yes

# Deny dangerous commands
sentinel deny-scripts-reconfig yes

# Configuration persistence
sentinel config-epoch infra-mind-master 0

# Leader election
sentinel leader-epoch infra-mind-master 0

# Current master information (will be updated automatically)
sentinel known-replica infra-mind-master 127.0.0.1 6379
sentinel current-epoch 0